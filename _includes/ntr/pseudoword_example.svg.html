<!-- Reverse Phoneme-to-Grapheme Mapping (pw_spell) -->
<div class="svg-chart-wrap">
<svg viewBox="0 0 680 320" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Reverse Phoneme-to-Grapheme Mapping: phoneme sequence to plausible spelling">
  <style>
    .pw-title   { font: 600 13px 'IBM Plex Mono', monospace; fill: #ffffff; }
    .pw-sub     { font: 400 10px 'IBM Plex Mono', monospace; fill: #888888; }
    .pw-phone   { font: 600 13px 'IBM Plex Mono', monospace; fill: #d0d0d0; }
    .pw-sel     { font: 600 13px 'IBM Plex Mono', monospace; fill: #3B6EA5; }
    .pw-alt     { font: 400 11px 'IBM Plex Mono', monospace; fill: #555555; }
    .pw-arrow   { stroke: #555555; stroke-width: 1.2; fill: none; marker-end: url(#pw-arrowhead); }
    .pw-label   { font: 400 10px 'IBM Plex Mono', monospace; fill: #666666; }
    .pw-result  { font: 700 22px 'IBM Plex Mono', monospace; fill: #3B6EA5; }
    .pw-result-label { font: 400 10px 'IBM Plex Mono', monospace; fill: #888888; }
    .pw-divider { stroke: #2a2a2a; stroke-width: 1; }
    .pw-sel-bg  { fill: #3B6EA5; opacity: 0.12; rx: 3; }
  </style>

  <defs>
    <marker id="pw-arrowhead" viewBox="0 0 10 7" refX="9" refY="3.5"
            markerWidth="8" markerHeight="6" orient="auto-start-reverse">
      <path d="M0,0 L10,3.5 L0,7 z" fill="#555555"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="340" y="22" text-anchor="middle" class="pw-title">Reverse Phoneme-to-Grapheme Mapping</text>
  <text x="340" y="38" text-anchor="middle" class="pw-sub">pw_spell: probabilistic spelling from phoneme input</text>

  <!-- Column headers -->
  <text x="60" y="62" text-anchor="middle" class="pw-label">phoneme</text>
  <text x="190" y="62" text-anchor="middle" class="pw-label">selected</text>
  <text x="380" y="62" text-anchor="middle" class="pw-label">candidates (by probability)</text>

  <line x1="20" y1="68" x2="520" y2="68" class="pw-divider"/>

  <!-- Row 1: /s/ -> s -->
  <g class="row-slide delay-1">
    <text x="60" y="98" text-anchor="middle" class="pw-phone">/s/</text>
    <line x1="100" y1="94" x2="148" y2="94" class="pw-arrow"/>
    <rect x="160" y="82" width="60" height="22" class="pw-sel-bg"/>
    <text x="190" y="98" text-anchor="middle" class="pw-sel">s</text>
    <text x="280" y="98" text-anchor="middle" class="pw-alt">c</text>
    <text x="340" y="98" text-anchor="middle" class="pw-alt">sc</text>
    <text x="405" y="98" text-anchor="middle" class="pw-alt">ss</text>
  </g>

  <line x1="20" y1="112" x2="520" y2="112" class="pw-divider"/>

  <!-- Row 2: /k/ -> c -->
  <g class="row-slide delay-2">
    <text x="60" y="142" text-anchor="middle" class="pw-phone">/k/</text>
    <line x1="100" y1="138" x2="148" y2="138" class="pw-arrow"/>
    <rect x="160" y="126" width="60" height="22" class="pw-sel-bg"/>
    <text x="190" y="142" text-anchor="middle" class="pw-sel">c</text>
    <text x="280" y="142" text-anchor="middle" class="pw-alt">k</text>
    <text x="340" y="142" text-anchor="middle" class="pw-alt">ck</text>
    <text x="405" y="142" text-anchor="middle" class="pw-alt">ch</text>
  </g>

  <line x1="20" y1="156" x2="520" y2="156" class="pw-divider"/>

  <!-- Row 3: /r/ -> r -->
  <g class="row-slide delay-3">
    <text x="60" y="186" text-anchor="middle" class="pw-phone">/&#x279;/</text>
    <line x1="100" y1="182" x2="148" y2="182" class="pw-arrow"/>
    <rect x="160" y="170" width="60" height="22" class="pw-sel-bg"/>
    <text x="190" y="186" text-anchor="middle" class="pw-sel">r</text>
    <text x="280" y="186" text-anchor="middle" class="pw-alt">rr</text>
    <text x="340" y="186" text-anchor="middle" class="pw-alt">wr</text>
  </g>

  <line x1="20" y1="200" x2="520" y2="200" class="pw-divider"/>

  <!-- Row 4: /i/ -> i -->
  <g class="row-slide delay-4">
    <text x="60" y="230" text-anchor="middle" class="pw-phone">/&#x26A;/</text>
    <line x1="100" y1="226" x2="148" y2="226" class="pw-arrow"/>
    <rect x="160" y="214" width="60" height="22" class="pw-sel-bg"/>
    <text x="190" y="230" text-anchor="middle" class="pw-sel">i</text>
    <text x="280" y="230" text-anchor="middle" class="pw-alt">y</text>
    <text x="340" y="230" text-anchor="middle" class="pw-alt">e</text>
  </g>

  <line x1="20" y1="244" x2="520" y2="244" class="pw-divider"/>

  <!-- Row 5: /m/ -> m -->
  <g class="row-slide delay-5">
    <text x="60" y="274" text-anchor="middle" class="pw-phone">/m/</text>
    <line x1="100" y1="270" x2="148" y2="270" class="pw-arrow"/>
    <rect x="160" y="258" width="60" height="22" class="pw-sel-bg"/>
    <text x="190" y="274" text-anchor="middle" class="pw-sel">m</text>
    <text x="280" y="274" text-anchor="middle" class="pw-alt">mm</text>
    <text x="340" y="274" text-anchor="middle" class="pw-alt">mb</text>
  </g>

  <!-- Right side: assembled result -->
  <line x1="540" y1="55" x2="540" y2="290" class="pw-divider"/>

  <g class="card-slide delay-6">
    <text x="610" y="62" text-anchor="middle" class="pw-label">output</text>

    <!-- Connection lines from selected graphemes to result -->
    <line x1="545" y1="94" x2="570" y2="155" stroke="#3B6EA5" stroke-width="0.8" opacity="0.3"/>
    <line x1="545" y1="138" x2="570" y2="160" stroke="#3B6EA5" stroke-width="0.8" opacity="0.3"/>
    <line x1="545" y1="182" x2="570" y2="170" stroke="#3B6EA5" stroke-width="0.8" opacity="0.3"/>
    <line x1="545" y1="226" x2="570" y2="180" stroke="#3B6EA5" stroke-width="0.8" opacity="0.3"/>
    <line x1="545" y1="270" x2="570" y2="190" stroke="#3B6EA5" stroke-width="0.8" opacity="0.3"/>

    <!-- Result box -->
    <rect x="565" y="130" width="90" height="70" rx="5" fill="none" stroke="#3B6EA5" stroke-width="1.5" opacity="0.4"/>
    <text x="610" y="175" text-anchor="middle" class="pw-result">scrim</text>

    <!-- Reassembled letters stacked below -->
    <text x="580" y="222" text-anchor="middle" style="font: 400 9px 'IBM Plex Mono', monospace; fill: #3B6EA5; opacity: 0.6;">s</text>
    <text x="590" y="222" text-anchor="middle" style="font: 400 9px 'IBM Plex Mono', monospace; fill: #3B6EA5; opacity: 0.6;">c</text>
    <text x="600" y="222" text-anchor="middle" style="font: 400 9px 'IBM Plex Mono', monospace; fill: #3B6EA5; opacity: 0.6;">r</text>
    <text x="610" y="222" text-anchor="middle" style="font: 400 9px 'IBM Plex Mono', monospace; fill: #3B6EA5; opacity: 0.6;">i</text>
    <text x="620" y="222" text-anchor="middle" style="font: 400 9px 'IBM Plex Mono', monospace; fill: #3B6EA5; opacity: 0.6;">m</text>
    <text x="600" y="236" text-anchor="middle" class="pw-sub">concatenated</text>
  </g>

  <!-- Bottom note -->
  <text x="270" y="310" text-anchor="middle" class="pw-sub">grapheme selected by highest probability in PG mapping table</text>
</svg>
</div>
